<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Vivace | PIX - Gerar QR</title>
  <link rel="stylesheet" href="PixAdmin.css" />
</head>
<body>
  <header class="topbar">
    <div class="logo">Vivace</div>
    <nav>
      <button onclick="location.href='DashboardAdmin.html'">Visão Geral</button>
      <button onclick="location.href='FinanceiroAdmin.html'">Financeiro</button>
      <button class="active">PIX</button>
    </nav>
  </header>

  <main class="container">
    <h1>PIX — Gerador de QR Code</h1>

    <section class="card">
      <h3>1) Chave PIX</h3>
      <div class="row">
        <select id="pixKeySelect">
          <option value="">— Usar chave cadastrada —</option>
        </select>
        <button id="btnLoadKeys">Carregar chaves</button>
        <button id="btnAddKey">Cadastrar nova chave</button>
      </div>

      <div id="newKeyForm" class="hidden">
        <input id="chaveTipo" placeholder="Tipo (email/cpf/cel/aleatoria)" />
        <input id="chaveValor" placeholder="Valor da chave (ex: seus@email.com)" />
        <input id="chaveNome" placeholder="Nome do recebedor" />
        <input id="chaveCidade" placeholder="Cidade (ex: SAO PAULO)" />
        <button id="saveKeyBtn">Salvar chave</button>
      </div>
    </section>

    <section class="card">
      <h3>2) Dados do Pagamento</h3>
      <div class="row">
        <input id="amount" type="number" step="0.01" placeholder="Valor (ex: 150.00) - opcional" />
        <input id="txid" placeholder="TxId (opcional, max 25)" maxlength="25" />
      </div>
      <div class="row">
        <input id="description" placeholder="Descrição/observação (opcional)" />
      </div>
      <div class="row">
        <button id="generateClientBtn">Gerar QR (cliente)</button>
        <button id="generateServerBtn">Gerar QR (server PNG)</button>
      </div>
    </section>

    <section class="card">
      <h3>QR Code</h3>
      <div id="qrContainer" class="qr-box">
        <canvas id="qrCanvas"></canvas>
        <img id="qrImageServer" alt="QR (server) " style="display:none;max-width:320px"/>
      </div>
      <pre id="payloadArea" class="payload"></pre>
      <div class="row">
        <button id="downloadQrBtn" style="display:none">Baixar QR (PNG)</button>
      </div>
    </section>
  </main>

  <!-- QR client lib -->
  <script src="https://cdn.jsdelivr.net/npm/qrcode@1.5.1/build/qrcode.min.js"></script>
  <script src="PixAdmin.js"></script>
</body>
</html>
